// Form groups
$label-top-margin-base: 1rem !default;
// Designed to help with the organization of horizontal forms.
.#{$prefix}-form-group {
  position: relative;
  margin-bottom: $spacer;
  padding-top: ($label-top-margin-base + $static-font-size);

  &.is-filled {
    // hide label-placeholders when the field is filled
    .#{$prefix}-label-placeholder {
      display: none;
    }

    .#{$prefix}-form-control__reset {
      display: block;
    }
  }

  &.#{$prefix}-form-input-search.is-filled {
    .#{$prefix}-form-control__search {
      display: none;
    }
  }

  // floating focused/filled will look like static
  &.is-focused,
  .is-focused,
  &.is-filled,
  .is-filled {
    .#{$prefix}-label-floating {
      @include nj-label-position($label-top-margin-base, $static-font-size);
    }
  }

  // State coloring: default, success, info, warning, danger
  @include nj-form-color(var(--label-color), var(--label-color-focus));

  .#{$prefix}-label-floating {
    color: var(--label-color);
  }

  &.is-filled  .#{$prefix}-label-floating{
    color: var(--label-color);
  }

  &.has-success {
    @include nj-form-color(var(--theme-success));
  }

  &.has-warning {
    @include nj-form-color(var(--theme-warning));
  }

  &.has-danger {
    @include nj-form-color(var(--theme-danger));
  }


  &.is-focused {
    .#{$prefix}-form-control {
      background-size: 100% 100%, 100% 100%;
      transition-duration: .3s;

      &:invalid {
        & ~ [class^="nj-label"],
        & ~ [class*=" nj-label"] {
          color: var(--theme-danger);
        }
      }
    }
  }

  &.is-visible {
    .#{$prefix}-form-control__password-off {
      display: none;
    }

    .#{$prefix}-form-control__password-on {
      display: block;
    }
  }

  &--icon-right {
    .#{$prefix}-form-control {
      padding-right: 2rem;
    }

    .material-icons {
      position: absolute;
      right: 0;
      bottom: .5rem;
    }
  }

  &--icon-left {
    .#{$prefix}-form-control {
      padding-left: 2rem;
    }

    .#{$prefix}-label-floating,
    .#{$prefix}-label-placeholder {
      left: 2rem;
    }

    .material-icons {
      position: absolute;
      bottom: .5rem;
      left: 0;
    }
  }

  .material-icons{
    color:var(--input-icon-color);
  }
}

// Inputs form control
//
.#{$prefix}-form-control {
  display: block;
  width: 100%;
  height: 2.5rem;
  padding-right: 0;
  padding-left: 0;
  color: var(--body-text-color);
  line-height: 1.3;
  background: no-repeat bottom, 50% calc(100% - 1px);
  background-size: 0 100%, 100% 100%;
  background-clip: padding-box;
  border: 0;
  @include transition(background 0s ease-out);

  &::placeholder {
    color: var(--input-placeholder-color);
    font-size: $font-size-base;
  }

  &:hover {
    outline: 0;
    &::placeholder {
      color: var(--input-placeholder-color-hover);
    }
  }

  &:focus {
    color: var(--input-placeholder-color-focus);
    outline: 0;
    &::placeholder {
      color: var(--input-placeholder-color-focus);
    }
  }

  &:-webkit-autofill,
  &:-webkit-autofill:hover,
  &:-webkit-autofill:focus,
  &:-webkit-autofill:active  {
    -webkit-text-fill-color:  var(--input-placeholder-color-focus);
    -webkit-box-shadow: 0 0 0 30px var(--components-background-color) inset !important; /* stylelint-disable-line */
  }

  // Unstyle the caret on `<select>`s in IE10+.
  &::-ms-expand {
    background-color: transparent;
    border: 0;
  }

  &:disabled::placeholder,
  &[readonly]::placeholder {
    color: var(--input-placeholder-color-disabled);
  }

  &:disabled{
    & + [class^="#{$prefix}-label"]{
      color: var(--input-placeholder-color-disabled);
    }
  }

  &__reset {
    display: none;
    cursor: pointer;
    @include material-animation-fast-out-slow-in();

    &:hover {
      transform: rotate(-90deg);
    }
  }

  &__password-on {
    display: none;
    cursor: pointer;
  }

  &__password-off {
    cursor: pointer;
  }
}

textarea.#{$prefix}-form-control {
  height: auto;
}

// Help blocks
// position: absolute approach - uses no vertical space and there is no form jumping, but text wrapping - not so good.
//
.#{$prefix}-help {
  position: absolute;
  display: none;
  margin-top: .25rem;
  font-weight: 400;
  @include font-size("centi");
  @extend .text-muted !optional;

  .#{$prefix}-form-group.is-focused & {
    display: block;
  }

  &:nth-of-type(2) {
    padding-top: 1rem; // the first one requires top padding to push it below the first one which is absolute positioned
  }
}

// Labels
//
// Reference http://www.google.com/design/spec/components/text-fields.html
// MDL implementation: http://www.getmdl.io/components/index.html#textfields-section
[class^="#{$prefix}-label"],
[class*="#{$prefix}-label"] {
  position: absolute;
  font-size: $font-size-base;
  pointer-events: none;
  @include transition(.3s ease all);

  &.#{$prefix}-label-floating {
    will-change: left, top, contents;
  }
}

// Floating/placeholder default (no focus)
.#{$prefix}-label-floating,
.#{$prefix}-label-placeholder {
  top: $label-top-margin-base + $static-font-size + .4375rem; // place the floating label to look like a placeholder with input padding
  left: 0;
}

// Static
.#{$prefix}-label-static {
  white-space: nowrap; // force to be removed line breaks: label must not be displayed on several lines
  @include nj-label-position($label-top-margin-base, $static-font-size);
}
